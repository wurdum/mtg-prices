{% extends 'cards_base.html' %}
{% block cards_table %}
    <div class="cards-table pull-right">
        {% if cards|length > 0 %}
        <table class="table table-bordered table-striped">
            <thead>
            <tr>
                <th rowspan="2">name</th>
                <th rowspan="2">type</th>
                <th rowspan="2">redaction</th>
                <th colspan="4">tcg</th>
                <th colspan="1">{{ shop }}</th>
            </tr>
            <tr>
                <th>url</th>
                <th>low</th>
                <th>mid</th>
                <th>high</th>
                <th>price</th>
            </tr>
            </thead>
            <tbody>
            {% for card in cards %}
                <tr>
                    {% set shop_offer = card.shops|shops(shop)|first %}
                    <td class="text-middle"><strong><a href="{{ card.info.url }}">{{ card.name }}</a></strong></td>
                    <td class="text-center text-middle">{{ card.type }}</td>
                    <td class="text-center text-middle">{{ card.redaction }}</td>
                    <td class="text-center text-middle"><a href="{{ card.prices.url }}">link</a></td>
                    <td class="text-center text-middle">${{ '%0.2f'|format(card|price('low')) }}</td>
                    <td class="text-center text-middle">${{ '%0.2f'|format(card|price('mid')) }}</td>
                    <td class="text-center text-middle">${{ '%0.2f'|format(card|price('high')) }}</td>
                    <td class="text-center text-middle"><a href="{{ shop_offer.url }}">{{ shop_offer.price }}</a></td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
        {% else %}
        <div class="center-box text-center">
            <img src="{{ url_for('static', filename='img/error.jpg') }}">
            <p class="text-center lead">No cards found :(</p>
        </div>
        {% endif %}
    </div>
{% endblock %}